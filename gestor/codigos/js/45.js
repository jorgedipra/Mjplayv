var editboxHTML ='<html class="expand close"> <head> <style type="text/css"> .expand { width: 100%; height: 100%; } .close { border: none; margin: 0px; padding: 0px; } html,body { overflow: hidden; } </style> </head> <body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();"> <form class="expand close" name="f"><textarea class="expand close" style="resize: none; background-color: #000000; color:#4aed05;" name="ta" wrap="hard" spellcheck="false"></textarea></form></body></html>';


var editboxCSS ='<html class="expand close"> <head> <style type="text/css"> .expand { width: 100%; height: 100%; } .close { border: none; margin: 0px; padding: 0px; } html,body { overflow: hidden; } </style> </head> <body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();"> <form class="expand close" name="f"><textarea class="expand close" style="resize: none; background-color: #000000; color:#4aed05;" name="ta" wrap="hard" spellcheck="false"></textarea></form></body></html>';


var editboxJAS ='<html class="expand close"> <head> <style type="text/css"> .expand { width: 100%; height: 100%; } .close { border: none; margin: 0px; padding: 0px; } html,body { overflow: hidden; } </style> </head> <body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();"> <form class="expand close" name="f"><textarea class="expand close" style="resize: none; background-color: #000000; color:#4aed05;" name="ta" wrap="hard" spellcheck="false"></textarea></form></body></html>';


var extraStuff ='<iframe scrolling="no" src="/gestor/comparir.html" frameborder="0" height="670" width="360"></iframe><style>iframe{position: absolute;right:10px;top:0; margin-top: 0;}</style>';


var defaultStuff =' <!DOCTYPE html>\n'+'\n'+'<!--\n'+'  Google HTML5 slide template\n'+'\n'+'  Authors: Luke Mahé (code)\n'+'           Marcin Wichary (code and design)\n'+'           \n'+'           Dominic Mazzoni (browser compatibility)\n'+'           Charles Chen (ChromeVox support)\n'+'\n'+'  URL: http://code.google.com/p/html5slides/\n'+'-->\n'+'\n'+'<html>\n'+'  <head>\n'+'    <title>Presentation</title>\n'+'\n'+'    <meta charset="utf-8">\n'+'  </head>\n'+'  \n'+'  <style>\n'+'    /* Your individual styles here, or just use inline styles if that’s\n'+'       what you want. */\n'+'    \n'+'    \n'+'  </style>\n'+'\n'+'  <body style="display: none">\n'+'\n'+'    <section class="slides layout-regular template-default">\n'+'      \n'+'      <!-- Your slides (<article>s) go here. Delete or comment out the\n'+'           slides below. -->\n'+'        \n'+'        \n'+'      \n'+'      <article class="biglogo">\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h1>\n'+'          Title Goes Here Up\n'+'          <br>\n'+'          To Two Lines\n'+'        </h1>\n'+'        <p>\n'+'          Sergey Brin\n'+'          <br>\n'+'          May 10, 2011\n'+'        </p>\n'+'      </article>\n'+'      \n'+'      <article>\n'+'        <p>\n'+'          This is a slide with just text. This is a slide with just text.\n'+'          This is a slide with just text. This is a slide with just text.\n'+'          This is a slide with just text. This is a slide with just text.\n'+'        </p>\n'+'        <p>\n'+'          There is more text just underneath.\n'+'        </p>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          Simple slide with header and text\n'+'        </h3>\n'+'        <p>\n'+'          This is a slide with just text. This is a slide with just text.\n'+'          This is a slide with just text. This is a slide with just text.\n'+'          This is a slide with just text. This is a slide with just text.\n'+'        </p>\n'+'        <p>\n'+'          There is more text just underneath with a <code>code sample: 5px</code>.\n'+'        </p>\n'+'      </article>\n'+'\n'+'      <article class="smaller">\n'+'        <h3>\n'+'          Simple slide with header and text (small font)\n'+'        </h3>\n'+'        <p>\n'+'          This is a slide with just text. This is a slide with just text.\n'+'          This is a slide with just text. This is a slide with just text.\n'+'          This is a slide with just text. This is a slide with just text.\n'+'        </p>\n'+'        <p>\n'+'          There is more text just underneath with a <code>code sample: 5px</code>.\n'+'        </p>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          Slide with bullet points and a longer title, just because we\n'+'          can make it longer\n'+'        </h3>\n'+'        <ul>\n'+'          <li>\n'+'            Use this template to create your presentation\n'+'          </li>\n'+'          <li>\n'+'            Use the provided color palette, box and arrow graphics, and\n'+'            chart styles\n'+'          </li>\n'+'          <li>\n'+'            Instructions are provided to assist you in using this\n'+'            presentation template effectively\n'+'          </li>\n'+'          <li>\n'+'            At all times strive to maintain Google"s corporate look and feel\n'+'          </li>\n'+'        </ul>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          Slide with bullet points that builds\n'+'        </h3>\n'+'        <ul class="build">\n'+'          <li>\n'+'            This is an example of a list\n'+'          </li>\n'+'          <li>\n'+'            The list items fade in\n'+'          </li>\n'+'          <li>\n'+'            Last one!\n'+'          </li>\n'+'        </ul>\n'+'\n'+'        <div class="build">\n'+'          <p>Any element with child nodes can build.</p>\n'+'          <p>It doesn"t have to be a list.</p>\n'+'        </div>\n'+'      </article>\n'+'\n'+'      <article class="smaller">\n'+'        <h3>\n'+'          Slide with bullet points (small font)\n'+'        </h3>\n'+'        <ul>\n'+'          <li>\n'+'            Use this template to create your presentation\n'+'          <li>\n'+'            Use the provided color palette, box and arrow graphics, and\n'+'            chart styles\n'+'          <li>\n'+'            Instructions are provided to assist you in using this\n'+'            presentation template effectively\n'+'          <li>\n'+'            At all times strive to maintain Google"s corporate look and feel\n'+'        </ul>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          Slide with a table\n'+'        </h3>\n'+'        \n'+'        <table>\n'+'          <tr>\n'+'            <th>\n'+'              Name\n'+'            <th>\n'+'              Occupation\n'+'          <tr>\n'+'            <td>\n'+'              Luke Mahé\n'+'            <td>\n'+'              V.P. of Keepin’ It Real\n'+'          <tr>\n'+'            <td>\n'+'              Marcin Wichary\n'+'            <td>\n'+'              The Michael Bay of Doodles\n'+'        </table>\n'+'      </article>\n'+'      \n'+'      <article class="smaller">\n'+'        <h3>\n'+'          Slide with a table (smaller text)\n'+'        </h3>\n'+'        \n'+'        <table>\n'+'          <tr>\n'+'            <th>\n'+'              Name\n'+'            <th>\n'+'              Occupation\n'+'          <tr>\n'+'            <td>\n'+'              Luke Mahé\n'+'            <td>\n'+'              V.P. of Keepin’ It Real\n'+'          <tr>\n'+'            <td>\n'+'              Marcin Wichary\n'+'            <td>\n'+'              The Michael Bay of Doodles\n'+'        </table>\n'+'      </article>\n'+'      \n'+'      <article>\n'+'        <h3>\n'+'          Styles\n'+'        </h3>\n'+'        <ul>\n'+'          <li>\n'+'            <span class="red">class="red"</span>\n'+'          <li>\n'+'            <span class="blue">class="blue"</span>\n'+'          <li>\n'+'            <span class="green">class="green"</span>\n'+'          <li>\n'+'            <span class="yellow">class="yellow"</span>\n'+'          <li>\n'+'            <span class="black">class="black"</span>\n'+'          <li>\n'+'            <span class="white">class="white"</span>\n'+'          <li>\n'+'            <b>bold</b> and <i>italic</i>\n'+'        </ul>\n'+'      </article>\n'+'      \n'+'      <article>\n'+'        <h2>\n'+'          Segue slide\n'+'        </h2>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          Slide with an image\n'+'        </h3>\n'+'        <p>\n'+'          <img style="height: 500px" src="images/example-graph.png">\n'+'        </p>\n'+'        <div class="source">\n'+'          Source: Sergey Brin\n'+'        </div>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          Slide with an image (centered)\n'+'        </h3>\n'+'        <p>\n'+'          <img class="centered" style="height: 500px" src="images/example-graph.png">\n'+'        </p>\n'+'        <div class="source">\n'+'          Source: Larry Page\n'+'        </div>\n'+'      </article>\n'+'\n'+'      <article class="fill">\n'+'        <h3>\n'+'          Image filling the slide (with optional header)\n'+'        </h3>\n'+'        <p>\n'+'          <img src="images/example-cat.jpg">\n'+'        </p>\n'+'        <div class="source white">\n'+'          Source: Eric Schmidt\n'+'        </div>\n'+'      </article>\n'+'\n'+'      <article>\n'+'        <h3>\n'+'          This slide has some code\n'+'        </h3>\n'+'        <section>\n'+'        <pre>\n'+'&lt;script type="text/javascript"&gt;\n'+'  // Say hello world until the user starts questioning\n'+'  // the meaningfulness of their existence.\n'+'  function helloWorld(world) {\n'+'    for (var i = 42; --i &gt;= 0;) {\n'+'      alert("Hello " + String(world));\n'+'    }\n'+'  }\n'+'&lt;/script&gt;\n'+'&lt;style&gt;\n'+'  p { color: pink }\n'+'  b { color: blue }\n'+'  u { color: "umber" }\n'+'&lt;/style&gt;\n'+'</pre>\n'+'        </section>\n'+'      </article>\n'+'      \n'+'      <article class="smaller">\n'+'        <h3>\n'+'          This slide has some code (small font)\n'+'        </h3>\n'+'        <section>\n'+'        <pre>\n'+'&lt;script type="text/javascript"&gt;\n'+'  // Say hello world until the user starts questioning\n'+'  // the meaningfulness of their existence.\n'+'  function helloWorld(world) {\n'+'    for (var i = 42; --i &gt;= 0;) {\n'+'      alert("Hello " + String(world));\n'+'    }\n'+'  }\n'+'&lt;/script&gt;\n'+'&lt;style&gt;\n'+'  p { color: pink }\n'+'  b { color: blue }\n'+'  u { color: "umber" }\n'+'&lt;/style&gt;\n'+'</pre>\n'+'        </section>\n'+'      </article>\n'+'      \n'+'      <article>\n'+'        <q>\n'+'          The best way to predict the future is to invent it.\n'+'        </q>\n'+'        <div class="author">\n'+'          Alan Kay\n'+'        </div>\n'+'      </article>\n'+'      \n'+'      <article class="smaller">\n'+'        <q>\n'+'          A distributed system is one in which the failure of a computer \n'+'          you didn’t even know existed can render your own computer unusable.\n'+'        </q>\n'+'        <div class="author">\n'+'          Leslie Lamport\n'+'        </div>\n'+'      </article>\n'+'      \n'+'      <article class="nobackground">\n'+'        <h3>\n'+'          A slide with an embed + title\n'+'        </h3>\n'+'        \n'+'        <iframe src="http://www.google.com/doodle4google/history.html"></iframe>\n'+'      </article>\n'+'\n'+'      <article class="nobackground">\n'+'        <iframe src="http://www.google.com/doodle4google/history.html"></iframe>\n'+'      </article>\n'+'\n'+'      <article class="fill">\n'+'        <h3>\n'+'          Full-slide embed with (optional) slide title on top\n'+'        </h3>\n'+'        <iframe src="http://www.google.com/doodle4google/history.html"></iframe>\n'+'      </article>\n'+'      \n'+'      <article>\n'+'        <h3>\n'+'          Thank you!\n'+'        </h3>\n'+'        \n'+'        <ul>\n'+'          <li>\n'+'            <a href="http://www.google.com">google.com</a>\n'+'        </ul>\n'+'      </article>\n'+'\n'+'    </section>\n'+'\n'+'  </body>\n'+'</html>\n'+'';

var st = '<style>';
var sf = '</style>';

var defaultcss = ' ';

var jat = '<script>';
var jaf = '</script>';

var defaultjas =' /*\n'+'  Google HTML5 slides template\n'+'\n'+'  Authors: Luke MahÃ© (code)\n'+'           Marcin Wichary (code and design)\n'+'\n'+'           Dominic Mazzoni (browser compatibility)\n'+'           Charles Chen (ChromeVox support)\n'+'\n'+'  URL: http://code.google.com/p/html5slides/\n'+'*/\n'+'\n'+'var PERMANENT_URL_PREFIX = "http://html5slides.googlecode.com/svn/trunk/";\n'+'\n'+'var SLIDE_CLASSES = ["far-past", "past", "current", "next", "far-next"];\n'+'\n'+'var PM_TOUCH_SENSITIVITY = 15;\n'+'\n'+'var curSlide;\n'+'\n'+'/* ---------------------------------------------------------------------- */\n'+'/* classList polyfill by Eli Grey \n'+' * (http://purl.eligrey.com/github/classList.js/blob/master/classList.js) */\n'+'\n'+'if (typeof document !== "undefined" && !("classList" in document.createElement("a"))) {\n'+'\n'+'(function (view) {\n'+'\n'+'var\n'+'    classListProp = "classList"\n'+'  , protoProp = "prototype"\n'+'  , elemCtrProto = (view.HTMLElement || view.Element)[protoProp]\n'+'  , objCtr = Object\n'+'    strTrim = String[protoProp].trim || function () {\n'+'    return this.replace(/^\s+|\s+$/g, "");\n'+'  }\n'+'  , arrIndexOf = Array[protoProp].indexOf || function (item) {\n'+'    for (var i = 0, len = this.length; i < len; i++) {\n'+'      if (i in this && this[i] === item) {\n'+'        return i;\n'+'      }\n'+'    }\n'+'    return -1;\n'+'  }\n'+'  // Vendors: please allow content code to instantiate DOMExceptions\n'+'  , DOMEx = function (type, message) {\n'+'    this.name = type;\n'+'    this.code = DOMException[type];\n'+'    this.message = message;\n'+'  }\n'+'  , checkTokenAndGetIndex = function (classList, token) {\n'+'    if (token === "") {\n'+'      throw new DOMEx(\n'+'          "SYNTAX_ERR"\n'+'        , "An invalid or illegal string was specified"\n'+'      );\n'+'    }\n'+'    if (/\s/.test(token)) {\n'+'      throw new DOMEx(\n'+'          "INVALID_CHARACTER_ERR"\n'+'        , "String contains an invalid character"\n'+'      );\n'+'    }\n'+'    return arrIndexOf.call(classList, token);\n'+'  }\n'+'  , ClassList = function (elem) {\n'+'    var\n'+'        trimmedClasses = strTrim.call(elem.className)\n'+'      , classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []\n'+'    ;\n'+'    for (var i = 0, len = classes.length; i < len; i++) {\n'+'      this.push(classes[i]);\n'+'    }\n'+'    this._updateClassName = function () {\n'+'      elem.className = this.toString();\n'+'    };\n'+'  }\n'+'  , classListProto = ClassList[protoProp] = []\n'+'  , classListGetter = function () {\n'+'    return new ClassList(this);\n'+'  }\n'+';\n'+'// Most DOMException implementations don"t allow calling DOMException"s toString()\n'+'// on non-DOMExceptions. Error"s toString() is sufficient here.\n'+'DOMEx[protoProp] = Error[protoProp];\n'+'classListProto.item = function (i) {\n'+'  return this[i] || null;\n'+'};\n'+'classListProto.contains = function (token) {\n'+'  token += "";\n'+'  return checkTokenAndGetIndex(this, token) !== -1;\n'+'};\n'+'classListProto.add = function (token) {\n'+'  token += "";\n'+'  if (checkTokenAndGetIndex(this, token) === -1) {\n'+'    this.push(token);\n'+'    this._updateClassName();\n'+'  }\n'+'};\n'+'classListProto.remove = function (token) {\n'+'  token += "";\n'+'  var index = checkTokenAndGetIndex(this, token);\n'+'  if (index !== -1) {\n'+'    this.splice(index, 1);\n'+'    this._updateClassName();\n'+'  }\n'+'};\n'+'classListProto.toggle = function (token) {\n'+'  token += "";\n'+'  if (checkTokenAndGetIndex(this, token) === -1) {\n'+'    this.add(token);\n'+'  } else {\n'+'    this.remove(token);\n'+'  }\n'+'};\n'+'classListProto.toString = function () {\n'+'  return this.join(" ");\n'+'};\n'+'\n'+'if (objCtr.defineProperty) {\n'+'  var classListPropDesc = {\n'+'      get: classListGetter\n'+'    , enumerable: true\n'+'    , configurable: true\n'+'  };\n'+'  try {\n'+'    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n'+'  } catch (ex) { // IE 8 doesn"t support enumerable:true\n'+'    if (ex.number === -0x7FF5EC54) {\n'+'      classListPropDesc.enumerable = false;\n'+'      objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n'+'    }\n'+'  }\n'+'} else if (objCtr[protoProp].__defineGetter__) {\n'+'  elemCtrProto.__defineGetter__(classListProp, classListGetter);\n'+'}\n'+'\n'+'}(self));\n'+'\n'+'}\n'+'/* ---------------------------------------------------------------------- */\n'+'\n'+'/* Slide movement */\n'+'\n'+'function getSlideEl(no) {\n'+'  if ((no < 0) || (no >= slideEls.length)) { \n'+'    return null;\n'+'  } else {\n'+'    return slideEls[no];\n'+'  }\n'+'};\n'+'\n'+'function updateSlideClass(slideNo, className) {\n'+'  var el = getSlideEl(slideNo);\n'+'  \n'+'  if (!el) {\n'+'    return;\n'+'  }\n'+'  \n'+'  if (className) {\n'+'    el.classList.add(className);\n'+'  }\n'+'    \n'+'  for (var i in SLIDE_CLASSES) {\n'+'    if (className != SLIDE_CLASSES[i]) {\n'+'      el.classList.remove(SLIDE_CLASSES[i]);\n'+'    }\n'+'  }\n'+'};\n'+'\n'+'function updateSlides() {\n'+'  for (var i = 0; i < slideEls.length; i++) {\n'+'    switch (i) {\n'+'      case curSlide - 2:\n'+'        updateSlideClass(i, "far-past");\n'+'        break;\n'+'      case curSlide - 1:\n'+'        updateSlideClass(i, "past");\n'+'        break;\n'+'      case curSlide: \n'+'        updateSlideClass(i, "current");\n'+'        break;\n'+'      case curSlide + 1:\n'+'        updateSlideClass(i, "next");      \n'+'        break;\n'+'      case curSlide + 2:\n'+'        updateSlideClass(i, "far-next");      \n'+'        break;\n'+'      default:\n'+'        updateSlideClass(i);\n'+'        break;\n'+'    }\n'+'  }\n'+'\n'+'  triggerLeaveEvent(curSlide - 1);\n'+'  triggerEnterEvent(curSlide);\n'+'\n'+'  window.setTimeout(function() {\n'+'    // Hide after the slide\n'+'    disableSlideFrames(curSlide - 2);\n'+'  }, 301);\n'+'\n'+'  enableSlideFrames(curSlide - 1);\n'+'  enableSlideFrames(curSlide + 2);\n'+'  \n'+'  if (isChromeVoxActive()) {\n'+'    speakAndSyncToNode(slideEls[curSlide]);\n'+'  }  \n'+'\n'+'  updateHash();\n'+'};\n'+'\n'+'function buildNextItem() {\n'+'  var toBuild  = slideEls[curSlide].querySelectorAll(".to-build");\n'+'\n'+'  if (!toBuild.length) {\n'+'    return false;\n'+'  }\n'+'\n'+'  toBuild[0].classList.remove("to-build", "");\n'+'\n'+'  if (isChromeVoxActive()) {\n'+'    speakAndSyncToNode(toBuild[0]);\n'+'  }\n'+'\n'+'  return true;\n'+'};\n'+'\n'+'function prevSlide() {\n'+'  if (curSlide > 0) {\n'+'    curSlide--;\n'+'\n'+'    updateSlides();\n'+'  }\n'+'};\n'+'\n'+'function nextSlide() {\n'+'  if (buildNextItem()) {\n'+'    return;\n'+'  }\n'+'\n'+'  if (curSlide < slideEls.length - 1) {\n'+'    curSlide++;\n'+'\n'+'    updateSlides();\n'+'  }\n'+'};\n'+'\n'+'/* Slide events */\n'+'\n'+'function triggerEnterEvent(no) {\n'+'  var el = getSlideEl(no);\n'+'  if (!el) {\n'+'    return;\n'+'  }\n'+'\n'+'  var onEnter = el.getAttribute("onslideenter");\n'+'  if (onEnter) {\n'+'    new Function(onEnter).call(el);\n'+'  }\n'+'\n'+'  var evt = document.createEvent("Event");\n'+'  evt.initEvent("slideenter", true, true);\n'+'  evt.slideNumber = no + 1; // Make it readable\n'+'\n'+'  el.dispatchEvent(evt);\n'+'};\n'+'\n'+'function triggerLeaveEvent(no) {\n'+'  var el = getSlideEl(no);\n'+'  if (!el) {\n'+'    return;\n'+'  }\n'+'\n'+'  var onLeave = el.getAttribute("onslideleave");\n'+'  if (onLeave) {\n'+'    new Function(onLeave).call(el);\n'+'  }\n'+'\n'+'  var evt = document.createEvent("Event");\n'+'  evt.initEvent("slideleave", true, true);\n'+'  evt.slideNumber = no + 1; // Make it readable\n'+'  \n'+'  el.dispatchEvent(evt);\n'+'};\n'+'\n'+'/* Touch events */\n'+'\n'+'function handleTouchStart(event) {\n'+'  if (event.touches.length == 1) {\n'+'    touchDX = 0;\n'+'    touchDY = 0;\n'+'\n'+'    touchStartX = event.touches[0].pageX;\n'+'    touchStartY = event.touches[0].pageY;\n'+'\n'+'    document.body.addEventListener("touchmove", handleTouchMove, true);\n'+'    document.body.addEventListener("touchend", handleTouchEnd, true);\n'+'  }\n'+'};\n'+'\n'+'function handleTouchMove(event) {\n'+'  if (event.touches.length > 1) {\n'+'    cancelTouch();\n'+'  } else {\n'+'    touchDX = event.touches[0].pageX - touchStartX;\n'+'    touchDY = event.touches[0].pageY - touchStartY;\n'+'  }\n'+'};\n'+'\n'+'function handleTouchEnd(event) {\n'+'  var dx = Math.abs(touchDX);\n'+'  var dy = Math.abs(touchDY);\n'+'\n'+'  if ((dx > PM_TOUCH_SENSITIVITY) && (dy < (dx * 2 / 3))) {\n'+'    if (touchDX > 0) {\n'+'      prevSlide();\n'+'    } else {\n'+'      nextSlide();\n'+'    }\n'+'  }\n'+'  \n'+'  cancelTouch();\n'+'};\n'+'\n'+'function cancelTouch() {\n'+'  document.body.removeEventListener("touchmove", handleTouchMove, true);\n'+'  document.body.removeEventListener("touchend", handleTouchEnd, true);  \n'+'};\n'+'\n'+'/* Preloading frames */\n'+'\n'+'function disableSlideFrames(no) {\n'+'  var el = getSlideEl(no);\n'+'  if (!el) {\n'+'    return;\n'+'  }\n'+'\n'+'  var frames = el.getElementsByTagName("iframe");\n'+'  for (var i = 0, frame; frame = frames[i]; i++) {\n'+'    disableFrame(frame);\n'+'  }\n'+'};\n'+'\n'+'function enableSlideFrames(no) {\n'+'  var el = getSlideEl(no);\n'+'  if (!el) {\n'+'    return;\n'+'  }\n'+'\n'+'  var frames = el.getElementsByTagName("iframe");\n'+'  for (var i = 0, frame; frame = frames[i]; i++) {\n'+'    enableFrame(frame);\n'+'  }\n'+'};\n'+'\n'+'function disableFrame(frame) {\n'+'  frame.src = "about:blank";\n'+'};\n'+'\n'+'function enableFrame(frame) {\n'+'  var src = frame._src;\n'+'\n'+'  if (frame.src != src && src != "about:blank") {\n'+'    frame.src = src;\n'+'  }\n'+'};\n'+'\n'+'function setupFrames() {\n'+'  var frames = document.querySelectorAll("iframe");\n'+'  for (var i = 0, frame; frame = frames[i]; i++) {\n'+'    frame._src = frame.src;\n'+'    disableFrame(frame);\n'+'  }\n'+'  \n'+'  enableSlideFrames(curSlide);\n'+'  enableSlideFrames(curSlide + 1);\n'+'  enableSlideFrames(curSlide + 2);  \n'+'};\n'+'\n'+'function setupInteraction() {\n'+'  /* Clicking and tapping */\n'+'  \n'+'  var el = document.createElement("div");\n'+'  el.className = "slide-area";\n'+'  el.id = "prev-slide-area";  \n'+'  el.addEventListener("click", prevSlide, false);\n'+'  document.querySelector("section.slides").appendChild(el);\n'+'\n'+'  var el = document.createElement("div");\n'+'  el.className = "slide-area";\n'+'  el.id = "next-slide-area";  \n'+'  el.addEventListener("click", nextSlide, false);\n'+'  document.querySelector("section.slides").appendChild(el);  \n'+'  \n'+'  /* Swiping */\n'+'  \n'+'  document.body.addEventListener("touchstart", handleTouchStart, false);\n'+'}\n'+'\n'+'/* ChromeVox support */\n'+'\n'+'function isChromeVoxActive() {\n'+'  if (typeof(cvox) == "undefined") {\n'+'    return false;\n'+'  } else {\n'+'    return true;\n'+'  }\n'+'};\n'+'\n'+'function speakAndSyncToNode(node) {\n'+'  if (!isChromeVoxActive()) {\n'+'    return;\n'+'  }\n'+'  \n'+'  cvox.ChromeVox.navigationManager.switchToStrategy(\n'+'      cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM, 0, true);  \n'+'  cvox.ChromeVox.navigationManager.syncToNode(node);\n'+'  cvox.ChromeVoxUserCommands.finishNavCommand("");\n'+'  var target = node;\n'+'  while (target.firstChild) {\n'+'    target = target.firstChild;\n'+'  }\n'+'  cvox.ChromeVox.navigationManager.syncToNode(target);\n'+'};\n'+'\n'+'function speakNextItem() {\n'+'  if (!isChromeVoxActive()) {\n'+'    return;\n'+'  }\n'+'  \n'+'  cvox.ChromeVox.navigationManager.switchToStrategy(\n'+'      cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM, 0, true);\n'+'  cvox.ChromeVox.navigationManager.next(true);\n'+'  if (!cvox.DomUtil.isDescendantOfNode(\n'+'      cvox.ChromeVox.navigationManager.getCurrentNode(), slideEls[curSlide])){\n'+'    var target = slideEls[curSlide];\n'+'    while (target.firstChild) {\n'+'      target = target.firstChild;\n'+'    }\n'+'    cvox.ChromeVox.navigationManager.syncToNode(target);\n'+'    cvox.ChromeVox.navigationManager.next(true);\n'+'  }\n'+'  cvox.ChromeVoxUserCommands.finishNavCommand("");\n'+'};\n'+'\n'+'function speakPrevItem() {\n'+'  if (!isChromeVoxActive()) {\n'+'    return;\n'+'  }\n'+'  \n'+'  cvox.ChromeVox.navigationManager.switchToStrategy(\n'+'      cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM, 0, true);\n'+'  cvox.ChromeVox.navigationManager.previous(true);\n'+'  if (!cvox.DomUtil.isDescendantOfNode(\n'+'      cvox.ChromeVox.navigationManager.getCurrentNode(), slideEls[curSlide])){\n'+'    var target = slideEls[curSlide];\n'+'    while (target.lastChild){\n'+'      target = target.lastChild;\n'+'    }\n'+'    cvox.ChromeVox.navigationManager.syncToNode(target);\n'+'    cvox.ChromeVox.navigationManager.previous(true);\n'+'  }\n'+'  cvox.ChromeVoxUserCommands.finishNavCommand("");\n'+'};\n'+'\n'+'/* Hash functions */\n'+'\n'+'function getCurSlideFromHash() {\n'+'  var slideNo = parseInt(location.hash.substr(1));\n'+'\n'+'  if (slideNo) {\n'+'    curSlide = slideNo - 1;\n'+'  } else {\n'+'    curSlide = 0;\n'+'  }\n'+'};\n'+'\n'+'function updateHash() {\n'+'  location.replace("#" + (curSlide + 1));\n'+'};\n'+'\n'+'/* Event listeners */\n'+'\n'+'function handleBodyKeyDown(event) {\n'+'  switch (event.keyCode) {\n'+'    case 39: // right arrow\n'+'    case 13: // Enter\n'+'    case 32: // space\n'+'    case 34: // PgDn\n'+'      nextSlide();\n'+'      event.preventDefault();\n'+'      break;\n'+'\n'+'    case 37: // left arrow\n'+'    case 8: // Backspace\n'+'    case 33: // PgUp\n'+'      prevSlide();\n'+'      event.preventDefault();\n'+'      break;\n'+'\n'+'    case 40: // down arrow\n'+'      if (isChromeVoxActive()) {\n'+'        speakNextItem();\n'+'      } else {\n'+'        nextSlide();\n'+'      }\n'+'      event.preventDefault();\n'+'      break;\n'+'\n'+'    case 38: // up arrow\n'+'      if (isChromeVoxActive()) {\n'+'        speakPrevItem();\n'+'      } else {\n'+'        prevSlide();\n'+'      }\n'+'      event.preventDefault();\n'+'      break;\n'+'  }\n'+'};\n'+'\n'+'function addEventListeners() {\n'+'  document.addEventListener("keydown", handleBodyKeyDown, false);  \n'+'};\n'+'\n'+'/* Initialization */\n'+'\n'+'function addPrettify() {\n'+'  var els = document.querySelectorAll("pre");\n'+'  for (var i = 0, el; el = els[i]; i++) {\n'+'    if (!el.classList.contains("noprettyprint")) {\n'+'      el.classList.add("prettyprint");\n'+'    }\n'+'  }\n'+'  \n'+'  var el = document.createElement("script");\n'+'  el.type = "text/javascript";\n'+'  el.src = PERMANENT_URL_PREFIX + "prettify.js";\n'+'  el.onload = function() {\n'+'    prettyPrint();\n'+'  }\n'+'  document.body.appendChild(el);\n'+'};\n'+'\n'+'function addFontStyle() {\n'+'  var el = document.createElement("link");\n'+'  el.rel = "stylesheet";\n'+'  el.type = "text/css";\n'+'  el.href = "http://fonts.googleapis.com/css?family=" +\n'+'            "Open+Sans:regular,semibold,italic,italicsemibold|Droid+Sans+Mono";\n'+'\n'+'  document.body.appendChild(el);\n'+'};\n'+'\n'+'function addGeneralStyle() {\n'+'  var el = document.createElement("link");\n'+'  el.rel = "stylesheet";\n'+'  el.type = "text/css";\n'+'  el.href = PERMANENT_URL_PREFIX + "styles.css";\n'+'  document.body.appendChild(el);\n'+'  \n'+'  var el = document.createElement("meta");\n'+'  el.name = "viewport";\n'+'  el.content = "width=1100,height=750";\n'+'  document.querySelector("head").appendChild(el);\n'+'  \n'+'  var el = document.createElement("meta");\n'+'  el.name = "apple-mobile-web-app-capable";\n'+'  el.content = "yes";\n'+'  document.querySelector("head").appendChild(el);\n'+'};\n'+'\n'+'function makeBuildLists() {\n'+'  for (var i = curSlide, slide; slide = slideEls[i]; i++) {\n'+'    var items = slide.querySelectorAll(".build > *");\n'+'    for (var j = 0, item; item = items[j]; j++) {\n'+'      if (item.classList) {\n'+'        item.classList.add("to-build");\n'+'      }\n'+'    }\n'+'  }\n'+'};\n'+'\n'+'function handleDomLoaded() {\n'+'  slideEls = document.querySelectorAll("section.slides > article");\n'+'\n'+'  setupFrames();\n'+'\n'+'  addFontStyle();\n'+'  addGeneralStyle();\n'+'  addPrettify();\n'+'  addEventListeners();\n'+'\n'+'  updateSlides();\n'+'\n'+'  setupInteraction();\n'+'  makeBuildLists();\n'+'\n'+'  document.body.classList.add("loaded");\n'+'};\n'+'\n'+'function initialize() {\n'+'  getCurSlideFromHash();\n'+'\n'+'  if (window["_DEBUG"]) {\n'+'    PERMANENT_URL_PREFIX = "../";\n'+'  }\n'+'\n'+'  if (window["_DCL"]) {\n'+'    handleDomLoaded();\n'+'  } else {\n'+'    document.addEventListener("DOMContentLoaded", handleDomLoaded, false);\n'+'  }\n'+'}\n'+'\n'+'// If ?debug exists then load the script relative instead of absolute\n'+'if (!window["_DEBUG"] && document.location.href.indexOf("?debug") !== -1) {\n'+'  document.addEventListener("DOMContentLoaded", function() {\n'+'    // Avoid missing the DomContentLoaded event\n'+'    window["_DCL"] = true\n'+'  }, false);\n'+'\n'+'  window["_DEBUG"] = true;\n'+'  var script = document.createElement("script");\n'+'  script.type = "text/javascript";\n'+'  script.src = "../slides.js";\n'+'  var s = document.getElementsByTagName("script")[0];\n'+'  s.parentNode.insertBefore(script, s);\n'+'\n'+'  // Remove this script\n'+'  s.parentNode.removeChild(s);\n'+'} else {\n'+'  initialize();\n'+'}';

var old = '';
var oldcss = '';
var oldjas = '';
                        
function init()
{
  window.editbox.document.write(editboxHTML);
  window.editbox.document.close();
  window.editbox.document.f.ta.value = defaultStuff;
  update();
}

function initcss()
{
  window.editboxcss.document.write( editboxCSS );
  window.editboxcss.document.close();
  window.editboxcss.document.f.ta.value = defaultcss;
  update();
}

function initjas()
{
  window.editboxjas.document.write( editboxJAS );
  window.editboxjas.document.close();
  window.editboxjas.document.f.ta.value = defaultjas;
  update();
}

function update()
{
  var textarea = window.editbox.document.f.ta; 
  var textareacss = window.editboxcss.document.f.ta;
  var textareajas = window.editboxjas.document.f.ta;
  
  var d = dynamicframe.document; 
  if (old != textarea.value || oldcss != textareacss.value || oldjas != textareajas.value) {
    old = textarea.value;
    oldcss = textareacss.value; 
    oldjas = textareajas.value; 
    o =  st + oldcss + sf;
    oo =  jat + oldjas + jaf;
    d.open();
    d.write(o);
    d.write(oo);
    d.write(old);
    
    if ( old.replace(/[\r\n]/g,'') == defaultStuff.replace(/[\r\n]/g,''))
      d.write(extraStuff);
    d.close();
  }

  window.setTimeout(update, 150);
} 

function tab(pestana,panel)
	{
		pst 	= document.getElementById(pestana);
		pnl 	= document.getElementById(panel);
		psts	= document.getElementById('tabs').getElementsByTagName('li');
		pnls	= document.getElementById('paneles').getElementsByTagName('div');		
		
		for(i=0; i< psts.length; i++)
		{
			psts[i].className = '';
		}	
		
		pst.className = 'actual';		
		
		for(i=0; i< pnls.length; i++)
		{
			pnls[i].style.display = 'none';
		}	
		
		pnl.style.display = 'block';
	}
